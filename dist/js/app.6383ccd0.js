(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["qiankuttest"]=t():e["qiankuttest"]=t()})(window,(function(){return function(e){function t(t){for(var n,o,l=t[0],c=t[1],s=t[2],u=0,m=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&m.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(m.length)m.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var c=a[l];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp_qiankuttest"]=window["webpackJsonp_qiankuttest"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var d=c;return i.push([0,"chunk-vendors"]),a()}({0:function(e,t,a){e.exports=a("56d7")},"0edf":function(e,t,a){},"197d":function(e,t,a){"use strict";a("3829")},3829:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Contanier")],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contanier"},[a("div",{staticClass:"left"},[a("div",{staticClass:"left-header"},[a("el-input",{staticClass:"header-left",attrs:{"suffix-icon":"el-icon-search",placeholder:"输入企业/顶级企业/企业号/合同企业名称搜索"},on:{change:function(t){return e.handleNodeClick({page:1,pageSize:e.pageSize,areaId:0,keyword:e.searchInput},"search")},focus:e.searchFocus,blur:e.searchBlur},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})],1),a("div",{staticClass:"left-main"},[a("el-tree",{staticClass:"tree",attrs:{data:e.eltreeData,props:e.defaultProps,"highlight-current":e.highlightCurrent,"default-expand-all":Boolean(e.defaultExpandAll)},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node treeNode"},[a("span",[void 0!==r.children?a("i",{staticClass:"el-icon-folder-opened"}):a("i",{staticClass:"el-icon-folder"}),e._v(" "+e._s(n.label)+" ")])])}}])})],1)]),a("div",{staticClass:"right"},[a("div",{staticClass:"right-header"},[a("div",{staticClass:"main-right-title"},[e._v(e._s(this.currentAreaName))]),a("el-button",{staticClass:"main-right-button",attrs:{type:"primary"},on:{click:function(t){return e.editTenantClick("add")}}},[e._v("添加租户")])],1),a("div",{staticClass:"right-main"},[a("div",{staticClass:"main-right-table"},[a("el-table",{staticStyle:{width:"100%","font-size":"14px",color:"#222222","font-family":"PingFang SC","font-style":"normal","font-weight":"normal"},attrs:{data:e.tableData,"row-style":{height:"80px"},"cell-style":{padding:"0px",textAlign:"center"},"header-cell-style":{textAlign:"center",background:"#FBFBFB",fontSize:"14px"}}},[a("el-table-column",{attrs:{fixed:"",label:"序号",width:"60",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+(e.currentPage-1)*e.pageSize+1)+" ")]}}])}),a("el-table-column",{attrs:{fixed:"",prop:"topCustomerName",label:"顶级企业名称"}}),a("el-table-column",{attrs:{prop:"tenantName",label:"合同企业名称"}}),a("el-table-column",{attrs:{prop:"tenantCode",label:"企业代码"}}),a("el-table-column",{attrs:{prop:"adminName",label:"项目经理"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"wordColor",attrs:{type:"text",size:"small"},on:{click:function(a){return e.editTenantClick("edit",t.row)}}},[e._v("编辑")]),a("i",{domProps:{innerHTML:e._s("    ")}}),a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("el-button",{staticClass:"wordColor",attrs:{size:"small",type:"text",disabled:Boolean(e.enableEmail)},on:{click:function(a){return e.sendMailCallback({tenantId:t.row.tenantId})}}},[e._v("重发激活邮件")]),a("el-button",{staticClass:"wordColor",staticStyle:{"margin-left":"16px"},attrs:{type:"text",size:"small"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("关联服务商租户")]),a("el-button",{staticClass:"wordColor",attrs:{slot:"reference",type:"text",size:"small"},on:{click:function(a){return e.moreClick(t.row)}},slot:"reference"},[e._v("更多")])],1)]}}])})],1)],1),a("div",{staticClass:"main-right-page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalCount,background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-drawer",{ref:"drawer",staticClass:"dialog",attrs:{title:e.dialogTitle,visible:e.editTenantDialog,direction:"rtl","custom-class":"demo-drawer",size:"40%"},on:{"update:visible":function(t){e.editTenantDialog=t}}},[a("edit-tenant",{attrs:{confirmLoading:this.confirmLoading,editDialog:this.editDialog,currentRowTenantId:this.currentRowTenantId,editType:this.editType,eltreeData:this.eltreeData[0].children},on:{changeConfirmDialog:e.changeConfirmDialog,changeConfirmLoading:e.changeConfirmLoading,changeConfirmTimeout:e.changeConfirmTimeout,changeTableData:e.changeTableData}})],1)],1),a("el-dialog",{attrs:{visible:e.dialogFormVisible,width:"90%","show-close":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("codeConnect",{attrs:{currentRow:this.currentRowData,currentRowTenantId:this.currentRowTenantId,pageSize:this.pageSize,page:this.currentPage,currentAreaName:this.currentAreaName},on:{closeDialogFormVisible:this.closeDialogFormVisible}})],1)],1)])},l=[],c=a("5530"),s=a("1da1"),d=(a("96cf"),a("a9e3"),a("d3b7"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",attrs:{"demo-drawer__content":""}},[e._m(0),a("div",{staticClass:"forms"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px","label-position":"left",rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"合同企业名称",prop:"customerName"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择合同企业名称","filter-method":e.searchTenantName,loading:e.loading},on:{change:e.selectTenant},model:{value:e.tenantName,callback:function(t){e.tenantName=t},expression:"tenantName"}},e._l(e.tenantNames,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"顶级企业名称",prop:"topCustomerName"}},[a("el-input",{attrs:{disabled:"",placeholder:"顶级企业名称"},model:{value:e.form.topCustomerName,callback:function(t){e.$set(e.form,"topCustomerName",t)},expression:"form.topCustomerName"}})],1),a("el-form-item",{attrs:{label:"企业名称",prop:"tenantName"}},[a("el-input",{attrs:{placeholder:"企业名称"},model:{value:e.form.tenantName,callback:function(t){e.$set(e.form,"tenantName",t)},expression:"form.tenantName"}})],1),a("el-form-item",{attrs:{label:"所属区域",prop:"ownerArea"}},[a("el-select",{attrs:{placeholder:"请选择所属区域"},on:{change:e.selectAreaChange},model:{value:e.form.ownerArea,callback:function(t){e.$set(e.form,"ownerArea",t)},expression:"form.ownerArea"}},e._l(e.ownerAreas,(function(e){return a("el-option",{key:e.areaId,attrs:{label:e.label,value:e.areaId,disabled:e.disabled}})})),1)],1),a("el-form-item",{attrs:{label:"租户代码",prop:"tenantCode"}},[a("el-input",{attrs:{placeholder:"请输入租户代码"},model:{value:e.form.tenantCode,callback:function(t){e.$set(e.form,"tenantCode",t)},expression:"form.tenantCode"}})],1),a("el-form-item",{attrs:{label:"项目经理",prop:"adminName"}},[a("el-select",{attrs:{filterable:"",remote:"",placeholder:"请选择项目经理","remote-method":e.remoteMethod,loading:e.loading},on:{change:e.selectPM},model:{value:e.form.adminName,callback:function(t){e.$set(e.form,"adminName",t)},expression:"form.adminName"}},e._l(e.options,(function(e){return a("el-option",{key:e.mobile,attrs:{label:e.label,value:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"管理员手机号",prop:"adminPhone"}},[a("el-input",{attrs:{placeholder:"请输入管理员手机号"},model:{value:e.form.adminPhone,callback:function(t){e.$set(e.form,"adminPhone",t)},expression:"form.adminPhone"}})],1),a("el-form-item",{attrs:{label:"管理员邮箱",prop:"adminEmail"}},[a("el-input",{attrs:{placeholder:"请输入管理员邮箱"},model:{value:e.form.adminEmail,callback:function(t){e.$set(e.form,"adminEmail",t)},expression:"form.adminEmail"}}),a("span",[e._v("用于推送账户信息到此邮箱")])],1),a("el-form-item",{attrs:{label:"合同编号",prop:"contractNumber"}},[a("el-input",{attrs:{placeholder:"请输入合同编号"},model:{value:e.form.contractNumber,callback:function(t){e.$set(e.form,"contractNumber",t)},expression:"form.contractNumber"}})],1),a("el-form-item",{attrs:{label:"有效期",prop:"expireAt"}},[a("el-date-picker",{staticClass:"block",attrs:{type:"date",placeholder:"请选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},on:{change:e.datePickerChange},model:{value:e.form.expireAt,callback:function(t){e.$set(e.form,"expireAt",t)},expression:"form.expireAt"}})],1)],1),a("div",{staticClass:"demo-drawer__footer"},[a("el-button",{staticClass:"btn",on:{click:e.cancelForm}},[e._v("取 消")]),a("el-button",{staticClass:"btn",attrs:{type:"primary",loading:this.confirmLoading},on:{click:function(t){return e.saveChange(e.form)}}},[e._v(e._s(this.confirmLoading?"提交中 ...":"确 定"))])],1)],1)])}),u=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[a("div",{staticClass:"header-icon"}),a("h3",{staticClass:"header-title"},[e._v("开通/编辑租户")])])}],m=(a("ac1f"),a("00b4"),a("2b19"),a("4de4"),a("53ca")),h=(a("99af"),a("bc3a")),f="".concat(window.location.origin,"/"),p=function(e,t){return h.post("".concat(f).concat(e),t).then((function(e){return e})).catch((function(e){throw new Error(e)}))},g=function(){return p("backend/tenant/get-area")},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,pageSize:10,areaId:0,keyword:""};return"object"!==Object(m["a"])(e)&&(e={page:1,pageSize:10,areaId:0,keyword:""}),p("backend/tenant/get-tenant-list",e)},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""};return"object"!==Object(m["a"])(e)&&(e={keyword:""}),p("backend/tenant/get-customers",e)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{keyword:""};return"object"!==Object(m["a"])(e)&&(e={keyword:""}),p("backend/tenant/search-pm",e)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantId:""};return"object"!==Object(m["a"])(e)&&(e={tenantId:""}),p("backend/tenant/send-mail",e)},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantId:""};return"object"!==Object(m["a"])(e)&&(e={tenantId:""}),p("backend/tenant/get-tenant-detail",e)},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p("/backend/tenant/save-tenant-info",e)},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{customerId:""};return"object"!==Object(m["a"])(e)&&(e={customerId:""}),p("backend/tenant/get-customer",e)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantId:"",pageSize:"",page:""};return"object"!==Object(m["a"])(e)&&(e={}),p("backend/tenant/get-party-list",e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantId:0};return"object"!==Object(m["a"])(e)&&(e={}),p("backend/tenant/get-can-use-channel",e)},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tenantId:"",channelId:0,channelName:"",channelCode:"",partyId:""};return"object"!==Object(m["a"])(e)&&(e={}),p("backend/tenant/save-third-party",e)},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{partyId:"",tenantId:""};return"object"!==Object(m["a"])(e)&&(e={}),p("backend/tenant/do-sync-party",e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{partyId:"",tenantId:""};return"object"!==Object(m["a"])(e)&&(e={}),p("backend/tenant/get-init-pg",e)},S={name:"editTenant",props:["confirmLoading","editDialog","currentRowTenantId","eltreeData","editType","changeTableData"],data:function(){var e=function(e,t,a){if(!t)return a(new Error("手机号不能为空"));var n=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;if(!n.test(t))return a(new Error("请输入正确的手机号"));a()};return{dialog:!1,loading:!1,validPeriod:"",form:{customerId:"",contractName:"",topCustomerName:"",customerName:"",ownerArea:"",adminName:"",adminPhone:"",adminEmail:"",contractNumber:"",expireAt:"",tenantId:"",tenantName:"",tenantCode:"",dbName:""},options:[],pmName:"",list:[],newConfirmLoading:this.confirmLoading,newEditDialog:this.editDialog,tenantNames:[],tenantName:"",currentTenantId:this.currentRowTenantId,currentEditType:this.editType,ownerArea:"",ownerAreas:this.eltreeData,rules:{customerName:[{required:!0,message:"请选择合同企业名称",trigger:"blur"}],tenantName:[{required:!0,message:"企业名称不能为空",trigger:"blur"}],ownerArea:[{required:!0,message:"请选择所属区域",trigger:"blur"}],adminName:[{required:!0,message:"请选择项目经理",trigger:"blur"}],adminEmail:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],topCustomerName:[{required:!0,message:"顶级企业名称不能为空",trigger:"blur"}],tenantCode:[{required:!0,message:"企业代码不能为空",trigger:"blur"}],adminPhone:[{required:!0,message:"手机号不能为空"},{validator:e,trigger:"blur"}]}}},watch:{confirmLoading:function(e){this.newConfirmLoading=e},editDialog:function(e){this.newEditDialog=e},currentRowTenantId:function(e){0!==e&&(this.currentTenantId=e,this.getDetailData(this.currentTenantId))},editType:function(e){var t=this;if("add"===e){for(var a in this.form)this.form[a]="";this.tenantName="",this.pmName="",0===this.tenantNames.length&&v({keyword:""}).then((function(e){e.data.data.forEach((function(e){t.tenantNames.push({value:e.value,label:e.label,id:e.id})}))}))}else this.getDetailData(this.currentTenantId)}},created:function(){var e=this;Object.is(this.currentTenantId,0)||this.getDetailData(this.currentTenantId),v({keyword:""}).then((function(t){t.data.data.forEach((function(t){e.tenantNames.push({value:t.value,label:t.label,id:t.id})}))}))},mounted:function(){},methods:{remoteMethod:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""===e){a.next=7;break}return t.loading=!0,a.next=4,C({keyword:e}).then((function(e){t.options=e.data.data}));case 4:t.loading=!1,a.next=8;break;case 7:t.options=[];case 8:case"end":return a.stop()}}),a)})))()},cancelForm:function(){this.newConfirmLoading=!1,this.newEditDialog=!1,this.$emit("changeConfirmDialog",!1),this.$emit("changeConfirmLoading",!1),this.$emit("changeConfirmTimeout")},searchTenantName:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""===e){a.next=8;break}return t.loading=!0,t.tenantNames=[],a.next=5,v({keyword:e}).then((function(e){e.data.data.forEach((function(e){t.tenantNames.push({value:e.value,label:e.label,id:e.id})}))}));case 5:t.loading=!1,a.next=9;break;case 8:return a.abrupt("return");case 9:case"end":return a.stop()}}),a)})))()},getDetailData:function(e){var t=this;y({tenantId:e}).then((function(e){if(Object.is(e.status,200)){var a=e.data.data;t.form=a,t.ownerArea=a.ownerArea,t.tenantName=a.contractName,t.pmName=a.adminName,t.validPeriod=a.expireAt}}))},selectPM:function(e){var t=this.options.filter((function(t){return t.label===e}))[0];this.pmName=this.form.adminName=t.label,this.form.adminPhone=t.mobile,this.form.adminEmail=t.email},selectTenant:function(e){var t=this,a=this.tenantNames.filter((function(t){return Object.is(t.value,e)}));this.form.customerId=a[0].id,this.form.tenantName=this.form.contractName=this.form.customerName=this.tenantName,x({customerId:a[0].id}).then((function(e){var a,n;t.form.topCustomerName=e.data.data.topCustomerName,t.ownerArea=t.form.ownerArea=""===e.data.data.ownerArea||Object.is(Number(e.data.data.ownerArea),NaN)?(null===(a=t.ownerAreas.filter((function(t){return t.label===e.data.data.ownerArea}))[0])||void 0===a?void 0:a.areaId)||"其他":(null===(n=t.ownerAreas.filter((function(t){return Number(t.areaId)===Number(e.data.data.ownerArea)}))[0])||void 0===n?void 0:n.areaId)||0,"add"===t.editType&&(t.form.tenantName=t.tenantName)}))},selectAreaChange:function(e){this.form.ownerArea=e},saveChange:function(e){var t=this,a=!0;this.$refs["form"].validate((function(e){e||(t.$notify.error({title:"保存失败",message:"抱歉😭，检验未通过"}),a=!1)})),a&&(e.tenantId=this.currentTenantId,"add"===this.editType&&(e.adminName=this.pmName,e.contractName=this.tenantName,e.customerName=this.tenantName,e.tenantId=0),k(e).then((function(e){if(0===e.data.code){if(t.$notify({title:"保存成功",message:"恭喜😜 保存成功！",type:"success"}),"add"===t.editType){for(var a in t.form)t.form[a]="";t.tenantName=t.pmName=""}t.$emit("changeTableData",!1),t.$emit("changeConfirmDialog",!1),t.$emit("changeConfirmLoading",!1),t.$emit("changeConfirmTimeout")}else t.$notify.error({title:"保存失败",message:"抱歉😭，".concat(e.data.msg,"，请重新操作")})})))},datePickerChange:function(e){this.form.expireAt=e}}},j=S,_=(a("197d"),a("2877")),R=Object(_["a"])(j,d,u,!1,null,"188308bc",null),P=R.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"codeConnect"},[a("div",{staticClass:"main"},[a("div",{staticClass:"main-header"},[a("div",[a("i",{staticClass:"el-icon-arrow-left",on:{click:e.returnPage}},[e._v("返回")]),a("i",{domProps:{innerHTML:e._s("      ")}}),a("span",[e._v(e._s(this.currentRow.tenantName)+"(企业代码: "+e._s(this.currentRow.tenantCode)+")")])]),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.addConnect}},[e._v("添加服务商")])],1),a("div",{staticClass:"main-table"},[a("el-table",{staticStyle:{width:"100%","font-size":"14px",color:"#222222","font-family":"PingFang SC","font-style":"normal","font-weight":"normal"},attrs:{data:e.tableData,border:"","row-style":{height:"80px"},"cell-style":{padding:"0px",textAlign:"center"},"header-cell-style":{textAlign:"center",background:"#FBFBFB",fontSize:"14px"}}},[a("el-table-column",{attrs:{fixed:"",label:"序号",width:"100",type:"index"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.$index+(e.currentPage-1)*e.pageSize+1)+" ")]}}])}),a("el-table-column",{attrs:{prop:"partyName",label:"服务商名称",width:"240"}}),a("el-table-column",{attrs:{prop:"channelCode",label:"租户代码"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"wordColor",attrs:{type:"text",size:"small"},on:{click:function(a){return e.editConnect(t.row)}}},[e._v("编辑")]),a("i",{domProps:{innerHTML:e._s("    ")}}),a("el-button",{staticClass:"wordColor",attrs:{type:"text",size:"small"},on:{click:function(a){return e.syncParty(t.row)}}},[e._v("同步用户")])]}}])})],1)],1),a("div",{staticClass:"main-page"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.codeConnectDialog,"append-to-body":""},on:{"update:visible":function(t){e.codeConnectDialog=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"选择服务商","label-width":e.formLabelWidth,prop:"channelName"}},[a("el-select",{attrs:{disabled:Boolean(e.disabled),placeholder:"请选择服务商"},on:{change:e.selectChannelCall},model:{value:e.selectChannel,callback:function(t){e.selectChannel=t},expression:"selectChannel"}},e._l(e.channelList,(function(e){return a("el-option",{key:e.channelId,attrs:{label:e.channelName,value:e.channelName}})})),1)],1),a("el-form-item",{attrs:{label:"服务商租户代码","label-width":e.formLabelWidth,prop:"channelCode"}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入租户代码(仅支持英文字母及下划线组合)"},on:{change:e.editChannelCode},model:{value:e.channelCode,callback:function(t){e.channelCode=t},expression:"channelCode"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.codeConnectDialog=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"btn",attrs:{type:"primary",disabled:e.btnDisabled},on:{click:function(t){return e.saveData()}}},[e._v("确 定")])],1)],1)],1)},A=[],$={props:["currentRow","page","currentAreaName"],name:"Contanier",data:function(){return{form:{},channelCode:"",selectChannel:"",partyId:"",selectChannelObj:{},disabled:!1,channelId:"",formLabelWidth:"120px",codeConnectDialog:!1,dialogTitle:"",currentPage:1,pageTotalCount:0,pageSize:10,isPageSizeChange:!1,tableData:[],channelList:[],currentRowData:this.currentRow,btnDisabled:!1,value:""}},watch:{currentRow:function(e){this.currentRowData=e,this.initData()}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initData();case 2:case"end":return t.stop()}}),t)})))()},methods:{initData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N({tenantId:e.currentRowData.tenantId,pageSize:10,page:1});case 2:return a=t.sent,t.next=5,I({tenantId:e.currentRowData.tenantId});case 5:n=t.sent,e.tableData=a.data.data.list,e.channelList=n.data.data,r=a.data.data.pageData,e.pageTotalCount=r.total,e.pageSize=r.pageSize;case 11:case"end":return t.stop()}}),t)})))()},addConnect:function(){this.dialogTitle="添加服务商",this.codeConnectDialog=!0,this.disabled=!1,this.channelCode="",this.selectChannel="",this.partyId=""},editConnect:function(e){this.dialogTitle="编辑服务商",this.disabled=!0,this.codeConnectDialog=!0,this.selectChannelObj=e,this.channelCode=e.channelCode,this.selectChannel=e.partyName,this.partyId=e.partyId,this.channelId=e.channelId},handleSizeChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isPageSizeChange=!0,a.next=3,N({tenantId:t.currentRowData.tenantId,pageSize:e,page:1});case 3:n=a.sent,t.tableData=n.data.data.list,r=n.data.data.pageData,t.pageTotalCount=r.total,t.pageSize=r.pageSize,t.currentPage=1,t.isPageSizeChange=!1;case 10:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0!==t.isPageSizeChange){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,N({tenantId:t.currentRowData.tenantId,pageSize:t.pageSize,page:e});case 4:n=a.sent,t.tableData=n.data.data.list,t.currentPage=e;case 7:case"end":return a.stop()}}),a)})))()},saveData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=!0,""===e.selectChannel?(e.$notify.error({title:"失败 😭",message:"服务商不能为空"}),a=!1):/^[a-zA-Z_]{1,}$/.exec(e.channelCode)||(e.$notify.error({title:"失败 😭",message:"服务商代码仅支持英文字母及下划线组合"}),a=!1),a){t.next=4;break}return t.abrupt("return");case 4:return n={tenantId:e.currentRowData.tenantId||"",channelId:e.selectChannelObj.channelId||e.channelId||"",channelName:e.selectChannelObj.channelName||e.selectChannel||"",channelCode:e.channelCode,partyId:e.partyId||""},e.btnDisabled=!0,t.next=8,D(n);case 8:if(r=t.sent,0!==r.data.code){t.next=18;break}return e.$notify({title:"成功",message:"恭喜！💐 操作成功",type:"success"}),t.next=13,e.initData();case 13:e.codeConnectDialog=!1,e.currentPage=1,e.btnDisabled=!1,t.next=21;break;case 18:e.codeConnectDialog=!0,e.$notify.error({title:"失败 😭",message:"".concat(r.data.msg)}),e.btnDisabled=!1;case 21:case"end":return t.stop()}}),t)})))()},selectChannelCall:function(e){this.selectChannelObj=this.channelList.filter((function(t){return t.channelName===e}))[0]},editChannelCode:function(e){this.channelCode=e},returnPage:function(){this.$emit("closeDialogFormVisible")},syncParty:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.$confirm("同步服务商组织用户数据可能耗时几分钟到十几分钟不等，请耐心等待","提示",{title:"同步数据",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a={partyId:e.partyId,tenantId:t.currentRowData.tenantId};T(a),z(a),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"操作取消"})}));case 1:case"end":return a.stop()}}),a)})))()}}},E=$,L=(a("8cfe"),Object(_["a"])(E,O,A,!1,null,"68d88d30",null)),F=L.exports,M={name:"Contanier",components:{editTenant:P,codeConnect:F},data:function(){return{defaultExpandAll:!0,loading:!0,confirmLoading:!1,timer:null,searchInput:"",dialogTitle:"",fullscreen:!0,editTenantDialog:!1,editDialog:!1,currentRowTenantId:0,currentRowData:{},editType:"edit",currentPage:1,pageTotalCount:0,pageSize:10,currentAreaId:0,currentAreaName:"明源云客户",isPageSizeChange:!1,highlightCurrent:!0,eltreeData:[{label:"明源云客户",children:[]}],defaultProps:{children:"children",label:"label"},tableData:[],enableEmail:!0,dialogFormVisible:!1}},methods:{changeConfirmDialog:function(e){this.editTenantDialog=e},changeConfirmLoading:function(e){this.confirmLoading=e},changeConfirmTimeout:function(){clearTimeout(this.timer)},editTenantClick:function(e,t){"edit"===e?(this.currentRowTenantId=t.tenantId,this.editType="edit"):(this.currentRowTenantId=0,this.editType="add"),this.editTenantDialog=!0},codeConnectClick:function(){this.editDialog=!0},handleSizeChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isPageSizeChange=!0,a.next=3,b({page:1,pageSize:e,areaId:t.currentAreaId});case 3:n=a.sent,t.tableData=n.data.data.list,t.pageTotalCount=Number(n.data.data.pageData.total),t.pageSize=Number(n.data.data.pageData.pageSize),t.currentPage=1,t.isPageSizeChange=!1;case 9:case"end":return a.stop()}}),a)})))()},handleCurrentChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!0!==t.isPageSizeChange){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,b({page:"".concat(e),pageSize:t.pageSize,areaId:t.currentAreaId,keyword:t.searchInput});case 4:n=a.sent,t.tableData=n.data.data.list,t.currentPage=e,t.enableEmail=1!==n.data.data.adminType;case 8:case"end":return a.stop()}}),a)})))()},handleNodeClick:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:"search"!==t&&(a.searchInput=""),b({page:1,pageSize:a.pageSize,areaId:e.areaId||0,keyword:e.keyword}).then((function(e){200===e.status&&(a.tableData=e.data.data.list,a.pageTotalCount=Number(e.data.data.pageData.total),a.pageSize=Number(e.data.data.pageData.pageSize))})),a.currentAreaId=e.areaId,a.currentAreaName=e.label,a.currentPage=1;case 5:case"end":return n.stop()}}),n)})))()},moreClick:function(e){this.currentRowData=Object(c["a"])({},e)},initResponse:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:g().then((function(t){if(200!==t.status)throw new Error("后端服务异常");var a=t.data.data;a.forEach((function(t){return e.eltreeData[0].children.push({label:t.areaName,areaId:t.areaId})}))})),b({page:1,pageSize:10,areaId:0}).then((function(t){200===t.status&&(e.tableData=t.data.data.list,e.pageTotalCount=Number(t.data.data.pageData.total),e.pageSize=Number(t.data.data.pageData.pageSize)),e.enableEmail=1!==t.data.data.adminType}));case 2:case"end":return t.stop()}}),t)})))()},sendMailCallback:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,w(e);case 2:n=a.sent,0===n.data.code&&t.$notify({title:"成功",message:"激活邮件已发送成功！🤭",type:"success"});case 4:case"end":return a.stop()}}),a)})))()},changeTableData:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"add"===e.editType&&(e.currentPage=1),t.next=3,b({page:e.currentPage,pageSize:e.pageSize,areaId:e.currentAreaId,keyword:e.searchInput});case 3:a=t.sent,e.tableData=a.data.data.list,e.pageTotalCount=Number(a.data.data.pageData.total),e.pageSize=Number(a.data.data.pageData.pageSize);case 7:case"end":return t.stop()}}),t)})))()},closeDialogFormVisible:function(){this.dialogFormVisible=!1},searchFocus:function(){this.highlightCurrent=!1},searchBlur:function(){this.highlightCurrent=!0}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.initResponse();case 2:case"end":return t.stop()}}),t)})))()}},B=M,q=(a("a6d9"),Object(_["a"])(B,o,l,!1,null,null,null)),V=q.exports,H={name:"App",components:{Contanier:V}},W=H,J=Object(_["a"])(W,r,i,!1,null,null,null),Z=J.exports,G=(a("0fae"),a("5c96")),K=a.n(G);n["default"].config.productionTip=!1,n["default"].use(K.a),new n["default"]({el:"#app",render:function(e){return e(Z)}})},5809:function(e,t,a){},"8cfe":function(e,t,a){"use strict";a("5809")},a6d9:function(e,t,a){"use strict";a("0edf")}})}));
//# sourceMappingURL=app.6383ccd0.js.map